# Streamlit â†’ PyQt5 ë³€í™˜ ì™„ë£Œ ìš”ì•½

## ğŸ“‹ í”„ë¡œì íŠ¸ ì •ë³´

- **GitHub ì €ì¥ì†Œ**: https://github.com/futurianh1k/roidetyolo
- **PyQt ë¸Œëœì¹˜**: `pyqt-ui`
- **ìµœì‹  ì»¤ë°‹**: `f3fcbb7` - "Add PyQt5 desktop application version"
- **ì»¤ë°‹ ë‚ ì§œ**: 2025-01-09

## âœ… ì™„ë£Œëœ ì‘ì—…

### 1ï¸âƒ£ **ROI í¸ì§‘ íƒ­** (ğŸ“ ROI í¸ì§‘)
âœ… **ì‹¤ì‹œê°„ ì¹´ë©”ë¼ í”„ë¦¬ë·°**
- ì¹´ë©”ë¼ ì¼œê¸°/ë„ê¸° ë²„íŠ¼
- 30 FPS ì‹¤ì‹œê°„ ì¹´ë©”ë¼ ìŠ¤íŠ¸ë¦¼

âœ… **ë§ˆìš°ìŠ¤ í´ë¦­ ê¸°ë°˜ ROI ê·¸ë¦¬ê¸°**
- `ClickableLabel` ì»¤ìŠ¤í…€ ìœ„ì ¯ êµ¬í˜„
- í™”ë©´ ì§ì ‘ í´ë¦­ìœ¼ë¡œ ì  ì¶”ê°€
- ìŠ¤ì¼€ì¼ ë¹„ìœ¨ ìë™ ê³„ì‚° (ë¼ë²¨ í¬ê¸° â†” ì‹¤ì œ í”„ë ˆì„ í¬ê¸°)
  ```python
  scale_x = frame_w / label_w
  scale_y = frame_h / label_h
  real_x = int(x * scale_x)
  real_y = int(y * scale_y)
  ```

âœ… **ROI í¸ì§‘ ê¸°ëŠ¥**
- âœï¸ ROI í¸ì§‘ ì‹œì‘ (ì¹´ë©”ë¼ ì¼œê¸°)
- â¹ï¸ ROI í¸ì§‘ ì¤‘ì§€ (ì¹´ë©”ë¼ ë„ê¸°)
- â• í˜„ì¬ ì  ì¶”ê°€
- â¬…ï¸ ë§ˆì§€ë§‰ ì  ì·¨ì†Œ
- âœ… ROI ì™„ì„± (ìµœì†Œ 3ê°œ ì )
- â¬…ï¸â¡ï¸ ì¢Œ/ìš° 2ë¶„í•  ìë™ ìƒì„±
- ğŸ¯ 4ì‚¬ë¶„ë©´ ìë™ ìƒì„±
- ğŸ—‘ï¸ ëª¨ë‘ ì‚­ì œ

âœ… **ROI ì‹œê°í™”**
- ê¸°ì¡´ ROI: ì´ˆë¡ìƒ‰ ë‹¤ê°í˜• + ROI ID
- í¸ì§‘ ì¤‘ ì : ë¹¨ê°„ìƒ‰ ì›
- í¸ì§‘ ì¤‘ ì„ : íŒŒë€ìƒ‰ ì„ 

### 2ï¸âƒ£ **ì‹¤ì‹œê°„ ê²€ì¶œ íƒ­** (ğŸ¥ ì‹¤ì‹œê°„ ê²€ì¶œ)
âœ… **YOLO ê¸°ë°˜ ì‚¬ëŒ ê²€ì¶œ**
- YOLOv8 ëª¨ë¸ ì‚¬ìš©
- ROI ë‚´ ì‚¬ëŒ ì¶”ì 
- ì‹¤ì‹œê°„ FPS í‘œì‹œ

âœ… **ì–¼êµ´ ë¶„ì„ í†µí•©**
- MediaPipe Face Mesh ê¸°ë°˜
- ğŸ‘ï¸ ëˆˆ ê°œí (EAR)
- ğŸ‘„ ì… ìƒíƒœ (MAR - ë‹«í˜/ë§í•˜ê¸°/í¬ê²Œ ì—´ë¦¼)
- ğŸ˜Š í‘œì • ë¶„ì„ (6ê°€ì§€ ê°ì •)
- ğŸ˜· ë§ˆìŠ¤í¬/í˜¸í¡ê¸° ê²€ì¶œ

âœ… **ê²€ì¶œ ì œì–´**
- â–¶ï¸ ì‹¤ì‹œê°„ ê²€ì¶œ ì‹œì‘
- â¹ï¸ ê²€ì¶œ ì¤‘ì§€
- ì‹¤ì‹œê°„ ìƒíƒœ í‘œì‹œ (ROIë³„ present/absent)

### 3ï¸âƒ£ **í†µê³„ & ë¡œê·¸ íƒ­** (ğŸ“Š í†µê³„ & ë¡œê·¸)
âœ… **ì–¼êµ´ ë¶„ì„ í†µê³„**
- ğŸ­ ì´ ê²€ì¶œ ì–¼êµ´ ìˆ˜
- ğŸ˜Š í‘œì • ë¶„í¬ (6ê°€ì§€ ê°ì • + í¼ì„¼íŠ¸)
  - ğŸ˜ Neutral (ì¤‘ë¦½)
  - ğŸ˜Š Happy (í–‰ë³µ)
  - ğŸ˜¢ Sad (ìŠ¬í””)
  - ğŸ˜² Surprised (ë†€ëŒ)
  - ğŸ˜– Pain (ê³ í†µ)
  - ğŸ˜  Angry (í™”ë‚¨)
- ğŸ‘ï¸ ëˆˆ ìƒíƒœ (ëœ¸/ê°ìŒ + ê°œì•ˆìœ¨ í”„ë¡œê·¸ë ˆìŠ¤ ë°”)
- ğŸ‘„ ì… ìƒíƒœ (ë‹«í˜/ë§í•˜ê¸°/í¬ê²Œ ì—´ë¦¼)
- ğŸ˜· ë§ˆìŠ¤í¬/í˜¸í¡ê¸° ì°©ìš© ê²€ì¶œ íšŸìˆ˜
- ğŸ”„ í†µê³„ ì´ˆê¸°í™” ë²„íŠ¼

âœ… **YOLO ê²€ì¶œ í†µê³„**
- ROIë³„ present/absent ìƒíƒœ
- ROIë³„ ê²€ì¶œ ì¹´ìš´íŠ¸

âœ… **ì´ë²¤íŠ¸ ë¡œê·¸**
- ì‹œê°„ìˆœ ì´ë²¤íŠ¸ ê¸°ë¡ (ìµœëŒ€ 50ê°œ)
- ğŸ§¹ ë¡œê·¸ ì´ˆê¸°í™” ë²„íŠ¼

### 4ï¸âƒ£ **API í…ŒìŠ¤íŠ¸ íƒ­** (ğŸ”— API í…ŒìŠ¤íŠ¸)
âœ… **API í…ŒìŠ¤íŠ¸ ê¸°ëŠ¥**
- Watch ID ì„¤ì •
- Sender ID ì„¤ì •
- Note (ë©”ì‹œì§€) ì…ë ¥
- ğŸ“¤ API í…ŒìŠ¤íŠ¸ ì‹¤í–‰
- ğŸ“Š í…ŒìŠ¤íŠ¸ ê²°ê³¼ í‘œì‹œ (ìš”ì²­/ì‘ë‹µ)

### 5ï¸âƒ£ **ì„¤ì • íŒ¨ë„** (âš™ï¸ ì„¤ì • - ì™¼ìª½ ì‚¬ì´ë“œë°”)
âœ… **YOLO ëª¨ë¸ ì„¤ì •**
- ëª¨ë¸ ì„ íƒ: yolov8n/s/m/l.pt

âœ… **ì¹´ë©”ë¼ ì„¤ì •**
- ì¹´ë©”ë¼ ë²ˆí˜¸: 0~10

âœ… **ê²€ì¶œ ì„¤ì •**
- YOLO ê²€ì¶œ ê°„ê²©: 0.5~5.0ì´ˆ
- ì‹ ë¢°ë„ ì„ê³„ê°’: 0.0~1.0
- ì¡´ì¬ í™•ì¸ ì‹œê°„: 1~60ì´ˆ
- ë¶€ì¬ í™•ì¸ ì‹œê°„: 1~60ì´ˆ

âœ… **ì–¼êµ´ ë¶„ì„ ì„¤ì •**
- âœ… ì–¼êµ´ ë¶„ì„ í™œì„±í™”
- âœ… ROI ë‚´ë¶€ë§Œ ë¶„ì„
- ë¶„ì„ í•­ëª© ì •ë³´ í‘œì‹œ

âœ… **API ì„¤ì •**
- Watch ID ì…ë ¥
- API ì—”ë“œí¬ì¸íŠ¸ ì…ë ¥

âœ… **ì„¤ì • ì €ì¥**
- ğŸ’¾ ì„¤ì • ì €ì¥ ë²„íŠ¼ (config.json)

## ğŸ”§ ê¸°ìˆ ì  ê°œì„ ì‚¬í•­

### 1. **ë§ˆìš°ìŠ¤ í´ë¦­ ê¸°ë°˜ ROI í¸ì§‘**
```python
class ClickableLabel(QLabel):
    """ë§ˆìš°ìŠ¤ í´ë¦­ ê°€ëŠ¥í•œ ë¼ë²¨"""
    clicked = pyqtSignal(int, int)
    
    def mousePressEvent(self, event):
        if event.button() == Qt.LeftButton:
            self.clicked.emit(event.x(), event.y())
```

### 2. **ìŠ¤ì¼€ì¼ ë¹„ìœ¨ ê³„ì‚°**
```python
# ë¼ë²¨ í¬ê¸° vs ì‹¤ì œ í”„ë ˆì„ í¬ê¸°
scale_x = frame_w / label_w
scale_y = frame_h / label_h
real_x = int(x * scale_x)
real_y = int(y * scale_y)
```

### 3. **ì–¼êµ´ ë¶„ì„ í†µê³„ ì¤‘ë³µ ë°©ì§€**
```python
# YOLO ê²€ì¶œ ê°„ê²©ê³¼ ë™ê¸°í™”
detection_interval = self.config.get('detection_interval_seconds', 1.0)
if current_timestamp - self._last_face_stats_update >= detection_interval * 0.9:
    # ì–¼êµ´ ë¶„ì„ í†µê³„ ì—…ë°ì´íŠ¸
    self._last_face_stats_update = current_timestamp
```

### 4. **UI ìŠ¤íƒ€ì¼ì‹œíŠ¸**
- ì „ë¬¸ì ì¸ Qt ìŠ¤íƒ€ì¼ì‹œíŠ¸ ì ìš©
- ê·¸ë£¹ë°•ìŠ¤, ë²„íŠ¼, íƒ­, í…ìŠ¤íŠ¸ ì—ë””í„° ìŠ¤íƒ€ì¼ë§
- í˜¸ë²„ íš¨ê³¼, ë¹„í™œì„±í™” ìƒíƒœ ìŠ¤íƒ€ì¼
- í”„ë¡œê·¸ë ˆìŠ¤ ë°” ì»¤ìŠ¤í…€ ìŠ¤íƒ€ì¼

### 5. **ë¦¬ì†ŒìŠ¤ ê´€ë¦¬**
```python
def closeEvent(self, event):
    """ìœˆë„ìš° ë‹«ê¸° ì´ë²¤íŠ¸"""
    if self.detector:
        self.detector.stop()
    if hasattr(self, 'roi_edit_timer'):
        self.roi_edit_timer.stop()
    if self.camera_cap:
        self.camera_cap.release()
```

## ğŸ“Š í”„ë¡œì íŠ¸ í†µê³„

### ì½”ë“œ í†µê³„
- **pyqt_app.py**: 1,044ì¤„ (42KB)
- **README_PYQT.md**: 242ì¤„ (8.4KB)
- **requirements_pyqt.txt**: 19ì¤„ (361B)
- **ì´ ë¼ì¸ ìˆ˜**: 1,305ì¤„

### ì£¼ìš” í´ë˜ìŠ¤
1. **MainWindow**: ë©”ì¸ ìœˆë„ìš° (800+ ì¤„)
2. **ClickableLabel**: í´ë¦­ ê°€ëŠ¥í•œ ë¼ë²¨ ìœ„ì ¯ (10ì¤„)

### ì£¼ìš” ë©”ì„œë“œ
- `init_ui()`: UI ì´ˆê¸°í™”
- `create_settings_panel()`: ì„¤ì • íŒ¨ë„ ìƒì„±
- `create_roi_edit_tab()`: ROI í¸ì§‘ íƒ­
- `create_detection_tab()`: ì‹¤ì‹œê°„ ê²€ì¶œ íƒ­
- `create_stats_tab()`: í†µê³„ & ë¡œê·¸ íƒ­
- `create_api_test_tab()`: API í…ŒìŠ¤íŠ¸ íƒ­
- `update_detection_display()`: ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ (30 FPS)
- `on_start_roi_edit()`: ROI í¸ì§‘ ì‹œì‘
- `on_roi_canvas_click()`: ROI ìº”ë²„ìŠ¤ í´ë¦­ ì²˜ë¦¬

## ğŸ†š Streamlit vs PyQt5 ë¹„êµ

| í•­ëª© | Streamlit | PyQt5 |
|-----|-----------|-------|
| **ì‹¤í–‰ ë°©ì‹** | ì›¹ ë¸Œë¼ìš°ì € (í¬íŠ¸ 8501) | ë°ìŠ¤í¬í†± ì•± (ë…ë¦½ ì‹¤í–‰) |
| **ROI í¸ì§‘** | streamlit-image-coordinates í•„ìš” | ë„¤ì´í‹°ë¸Œ ë§ˆìš°ìŠ¤ í´ë¦­ |
| **ì„±ëŠ¥** | ì›¹ ì˜¤ë²„í—¤ë“œ ìˆìŒ | ë„¤ì´í‹°ë¸Œ ì„±ëŠ¥ |
| **ë°°í¬** | ì›¹ ì„œë²„ í•„ìš” | ë‹¨ë… ì‹¤í–‰ íŒŒì¼ ê°€ëŠ¥ |
| **UI ë°˜ì‘ì„±** | ì¬ì‹¤í–‰ ê¸°ë°˜ (ëŠë¦¼) | ì´ë²¤íŠ¸ ê¸°ë°˜ (ë¹ ë¦„) |
| **ì¹´ë©”ë¼ í”„ë¦¬ë·°** | ì œí•œì  | ì™„ì „ ì§€ì› |
| **ì„¤ì¹˜** | pip install streamlit | pip install PyQt5 |

## ğŸ“¦ ì˜ì¡´ì„±

### PyQt5 ì „ìš© íŒ¨í‚¤ì§€
```txt
PyQt5>=5.15.0
PyQt5-Qt5>=5.15.0
PyQt5-sip>=12.11.0
pyqtgraph>=0.13.0  # Optional
```

### ê³µí†µ íŒ¨í‚¤ì§€
```txt
ultralytics>=8.0.0
opencv-python>=4.8.0
requests>=2.31.0
numpy>=1.24.0,<2.0.0
Pillow>=10.0.0
mediapipe>=0.10.0
```

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### 1. ì˜ì¡´ì„± ì„¤ì¹˜
```bash
pip install -r requirements_pyqt.txt
```

### 2. PyQt5 ì•± ì‹¤í–‰
```bash
python pyqt_app.py
```

### 3. Streamlit ì•± ì‹¤í–‰ (ë¹„êµìš©)
```bash
streamlit run streamlit_app.py
```

## ğŸ“‚ íŒŒì¼ êµ¬ì¡°

```
yolo_roi_detector/
â”œâ”€â”€ pyqt_app.py                 # âœ… PyQt5 ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜
â”œâ”€â”€ streamlit_app.py            # Streamlit ë²„ì „ (ê¸°ì¡´)
â”œâ”€â”€ realtime_detector.py        # YOLO ê²€ì¶œ ë°±ì—”ë“œ (ê³µí†µ)
â”œâ”€â”€ face_analyzer.py            # ì–¼êµ´ ë¶„ì„ ëª¨ë“ˆ (ê³µí†µ)
â”œâ”€â”€ roi_utils.py                # ROI ìœ í‹¸ë¦¬í‹° (ê³µí†µ)
â”œâ”€â”€ camera_utils.py             # ì¹´ë©”ë¼ ìœ í‹¸ë¦¬í‹° (ê³µí†µ)
â”œâ”€â”€ config.json                 # ì„¤ì • íŒŒì¼ (ê³µí†µ)
â”œâ”€â”€ requirements_pyqt.txt       # âœ… PyQt5 ì˜ì¡´ì„±
â”œâ”€â”€ requirements.txt            # Streamlit ì˜ì¡´ì„±
â”œâ”€â”€ README_PYQT.md              # âœ… PyQt5 ë¬¸ì„œ
â””â”€â”€ PYQT_CONVERSION_SUMMARY.md  # âœ… ì´ ë¬¸ì„œ
```

## ğŸ¯ ì£¼ìš” ê°œì„ ì‚¬í•­ ìš”ì•½

1. âœ… **ë§ˆìš°ìŠ¤ í´ë¦­ ê¸°ë°˜ ROI í¸ì§‘**: í™”ë©´ ì§ì ‘ í´ë¦­ìœ¼ë¡œ ROI ìƒì„±
2. âœ… **ì‹¤ì‹œê°„ ì¹´ë©”ë¼ í”„ë¦¬ë·°**: ROI í¸ì§‘ ì‹œ ì‹¤ì‹œê°„ ì¹´ë©”ë¼ í™”ë©´
3. âœ… **ì–¼êµ´ ë¶„ì„ í†µê³„ ì •í™•ë„**: YOLO ê°„ê²©ê³¼ ë™ê¸°í™”í•˜ì—¬ ì¤‘ë³µ ì§‘ê³„ ë°©ì§€
4. âœ… **ë„¤ì´í‹°ë¸Œ ì„±ëŠ¥**: ì›¹ ì˜¤ë²„í—¤ë“œ ì—†ì´ ë¹ ë¥¸ ë°˜ì‘ì„±
5. âœ… **ë‹¨ë… ì‹¤í–‰**: ì›¹ ì„œë²„ ì—†ì´ ë…ë¦½ ì‹¤í–‰ ê°€ëŠ¥
6. âœ… **ì „ë¬¸ì ì¸ UI**: Qt ìŠ¤íƒ€ì¼ì‹œíŠ¸ë¡œ ì„¸ë ¨ëœ ë””ìì¸
7. âœ… **ì™„ì „í•œ ê¸°ëŠ¥ ì´ì‹**: Streamlitì˜ ëª¨ë“  ê¸°ëŠ¥ì„ PyQt5ë¡œ ì™„ì „ ì´ì‹

## ğŸ”— ê´€ë ¨ ë§í¬

- **GitHub ì €ì¥ì†Œ**: https://github.com/futurianh1k/roidetyolo
- **PyQt ë¸Œëœì¹˜**: `pyqt-ui` (https://github.com/futurianh1k/roidetyolo/tree/pyqt-ui)
- **Main ë¸Œëœì¹˜**: `main` (Streamlit ë²„ì „)
- **Pull Request**: https://github.com/futurianh1k/roidetyolo/pull/new/pyqt-ui

## ğŸ“ Git íˆìŠ¤í† ë¦¬

```
f3fcbb7 Add PyQt5 desktop application version
ffadeef Add realtime API alerts and fix media handler errors
b3c60e9 Add comprehensive YOLO-Face analysis synchronization explanation
22f2d5b Fix face analysis frequency and deprecation warnings
a0245d4 Add comprehensive face analysis statistics to Statistics tab
```

## ğŸ‰ ê²°ë¡ 

âœ… **Streamlit ê¸°ë°˜ ì›¹ UIë¥¼ PyQt5 ë°ìŠ¤í¬í†± ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ì™„ì „íˆ ë³€í™˜ ì™„ë£Œ!**

- **ë„¤ì´í‹°ë¸Œ ì„±ëŠ¥**: ì›¹ ì˜¤ë²„í—¤ë“œ ì—†ì´ ë¹ ë¥¸ ì‹¤í–‰
- **ì™„ì „í•œ ê¸°ëŠ¥**: ëª¨ë“  Streamlit ê¸°ëŠ¥ì„ PyQt5ë¡œ ì´ì‹
- **ê°œì„ ëœ UX**: ë§ˆìš°ìŠ¤ í´ë¦­ ê¸°ë°˜ ROI í¸ì§‘, ì‹¤ì‹œê°„ ì¹´ë©”ë¼ í”„ë¦¬ë·°
- **ì „ë¬¸ì ì¸ UI**: Qt ìŠ¤íƒ€ì¼ì‹œíŠ¸ë¡œ ì„¸ë ¨ëœ ë””ìì¸
- **ì •í™•í•œ í†µê³„**: YOLO-ì–¼êµ´ ë¶„ì„ ë™ê¸°í™”ë¡œ ì¤‘ë³µ ë°©ì§€

---

**ë²„ì „**: 1.0.0  
**ë‚ ì§œ**: 2025-01-09  
**ì‘ì„±ì**: AI Assistant  
**ì»¤ë°‹**: f3fcbb7  
**ë¸Œëœì¹˜**: pyqt-ui
